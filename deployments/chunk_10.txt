 || !$convex_token) {
        error_log("[OpenClaw Bridge] CONVEX_SITE_URL or CONVEX_API_TOKEN not configured — skipping order webhook for #{$order_id}");
        return;
    }

    $order = wc_get_order($order_id);
    if (!$order) {
        error_log("[OpenClaw Bridge] Cannot load WC order #{$order_id}");
        return;
    }

    $customer_email = $order->get_billing_email();
    $customer_name = trim($order->get_billing_first_name() . ' ' . $order->get_billing_last_name());

    // Process each line item that has OpenClaw agent metadata
    foreach ($order->get_items() as $item) {
        $product = $item->get_product();
        if (!$product) continue;

        $product_id = $product->get_id();
        // Check for OpenClaw agent mapping on this product
        $agent_id = get_post_meta($product_id, '_openclaw_agent_id', true);
        if (!$agent_id) {
            // Not an OpenClaw-fulfillable product — skip
            continue;
        }

        // Get parent product ID for variations
        $wc_product_id = $product->is_type('variation')
            ? $product->get_parent_id()
            : $product_id;
        $wc_variation_id = $product->is_type('variation')
            ? $product_id
            : null;

        $line_total = intval(round($item->get_total() * 100)); // Convert to cents

        $payload = [
            'wcOrderId' => intval($order_id),
            'wcProductId' => intval($wc_product_id),
            'customerEmail' => $customer_email,
     