lIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKCi8qKgogKiBHRVQgL29wZW5jbGF3L3YxL3N1YnNjcmlwdGlvbi9zdGF0dXM/ZW1haWw9Y3VzdG9tZXJAZXhhbXBsZS5jb20KICovCmZ1bmN0aW9uIG9wZW5jbGF3X2dldF9zdWJzY3JpcHRpb25fc3RhdHVzKFdQX1JFU1RfUmVxdWVzdCAkcmVxdWVzdCk6IFdQX1JFU1RfUmVzcG9uc2UgewogICAgJGVtYWlsID0gJHJlcXVlc3QtPmdldF9wYXJhbSgnZW1haWwnKTsKCiAgICAvLyBGaW5kIGN1c3RvbWVyIGJ5IGVtYWlsCiAgICAkY3VzdG9tZXIgPSBnZXRfdXNlcl9ieSgnZW1haWwnLCAkZW1haWwpOwogICAgaWYgKCEkY3VzdG9tZXIpIHsKICAgICAgICByZXR1cm4gbmV3IFdQX1JFU1RfUmVzcG9uc2UoWwogICAgICAgICAgICAnc3RhdHVzJyA9PiAnbm9uZScsCiAgICAgICAgICAgICdtZXNzYWdlJyA9PiAnTm8gY3VzdG9tZXIgZm91bmQgd2l0aCB0aGlzIGVtYWlsLicsCiAgICAgICAgXSwgMjAwKTsgLy8gMjAwIG5vdCA0MDQg4oCUICJubyBzdWJzY3JpcHRpb24iIGlzIGEgdmFsaWQgcmVzcG9uc2UsIG5vdCBhbiBlcnJvcgogICAgfQoKICAgIC8vIEdldCBhY3RpdmUgc3Vic2NyaXB0aW9ucyBmb3IgdGhpcyBjdXN0b21lcgogICAgaWYgKCFmdW5jdGlvbl9leGlzdHMoJ3djc19nZXRfdXNlcnNfc3Vic2NyaXB0aW9ucycpKSB7CiAgICAgICAgcmV0dXJuIG5ldyBXUF9SRVNUX1Jlc3BvbnNlKFsKICAgICAgICAgICAgJ2Vycm9yJyA9PiAnV29vQ29tbWVyY2UgU3Vic2NyaXB0aW9ucyBub3QgYWN0aXZlLicsCiAgICAgICAgXSwgNTAzKTsKICAgIH0KCiAgICAkc3Vic2NyaXB0aW9ucyA9IHdjc19nZXRfdXNlcnNfc3Vic2NyaXB0aW9ucygkY3VzdG9tZXItPklEKTsKICAgICRhY3RpdmUgPSBudWxsOwoKICAgIGZvcmVhY2ggKCRzdWJzY3JpcHRpb25zIGFzICRzdWIpIHsKICAgICAgICBpZiAoJHN1Yi0+aGFzX3N0YXR1cyhbJ2FjdGl2ZScsICdwZW5kaW5nLWNhbmNlbCddKSkgewogICAgICAgICAgICAkYWN0aXZlID0gJHN1YjsKICAgICAgICAgICAgYnJlYWs7IC8vIFVzZSB0aGUgZmlyc3QgYWN0aXZlIHN1YnNjcmlwdGlvbgogICAgICAgIH0KICAgIH0KCiAgICBpZiAoISRhY3RpdmUpIHsKICAgICAgICByZXR1cm4gbmV3IFdQX1JFU1RfUmVzcG9uc2UoWwogICAgICAgICAgICAnc3RhdHVzJyA9PiAnaW5hY3RpdmUnLAogICAgICAgICAgICAnY3VzdG9tZXJfaWQnID0+ICRjdXN0b21lci0+SUQsCiAgICAgICAgICAgICdlbWFpbCcgPT4gJGVtYWlsLAogICAgICAgIF0sIDIwMCk7CiAgICB9CgogICAgLy8gR2V0IHRoZSBzdWJzY3JpcHRpb24gcHJvZHVjdCBhbmQgaXRzIE9wZW5DbGF3IG1ldGEKICAgICRpdGVtcyA9ICRhY3RpdmUtPmdldF9pdGVtcygpOwogICAgJHByb2R1Y3QgPSBudWxsOwogICAgZm9yZWFjaCAoJGl0ZW1zIGFzICRpdGVtKSB7CiAgICAgICAgJHByb2R1Y3QgPSAkaXRl