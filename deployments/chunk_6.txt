m->get_product();
        break;
    }

    $tier = $product ? get_post_meta($product->get_id(), '_openclaw_tier', true) : 'unknown';
    $max_agents = $product ? intval(get_post_meta($product->get_id(), '_openclaw_max_agents', true)) : 0;
    $max_tasks = $product ? intval(get_post_meta($product->get_id(), '_openclaw_max_tasks_monthly', true)) : 0;

    return new WP_REST_Response([
        'status' => $active->get_status(), // 'active' or 'pending-cancel'
        'customer_id' => $customer->ID,
        'email' => $email,
        'subscription_id' => $active->get_id(),
        'tier' => $tier,
        'fleet_access' => [
            'max_agents' => $max_agents,
            'max_tasks_monthly' => $max_tasks,
        ],
        'current_period_end' => $active->get_date('next_payment'),
        'created' => $active->get_date('start'),
    ], 200);
}

/**
 * GET /openclaw/v1/subscription/all-active
 */
function openclaw_get_all_active_subscriptions(WP_REST_Request $request): WP_REST_Response {
    if (!function_exists('wcs_get_subscriptions')) {
        return new WP_REST_Response(['error' => 'WooCommerce Subscriptions not active.'], 503);
    }

    $subscriptions = wcs_get_subscriptions([
        'subscription_status' => ['active', 'pending-cancel'],
        'subscriptions_per_page' => 100,
    ]);

    $results = [];
    foreach ($subscriptions as $sub) {
        $customer = $sub->get_user();
        $items = $sub->get_items();
        $product = null;
        foreach ($items