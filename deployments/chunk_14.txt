get_user();
    $items = $subscription->get_items();
    $product = null;
    foreach ($items as $item) {
        $product = $item->get_product();
        break;
    }

    $tier = $product ? get_post_meta($product->get_id(), '_openclaw_tier', true) : 'unknown';

    $body = json_encode([
        'event' => 'subscription.status_changed',
        'customer_email' => $customer ? $customer->user_email : null,
        'customer_id' => $customer ? $customer->ID : null,
        'subscription_id' => $subscription->get_id(),
        'old_status' => $old_status,
        'new_status' => $new_status,
        'tier' => $tier,
        'timestamp' => time(),
    ]);

    // Sign the outbound webhook with HMAC
    $timestamp = time();
    $body_hash = hash('sha256', $body);
    $payload = "{$timestamp}:POST:/openclaw/subscription-event:{$body_hash}";
    $signature = hash_hmac('sha256', $payload, OPENCLAW_BRIDGE_SECRET);

    // Fire-and-forget POST to fleet
    wp_remote_post($fleet_webhook_url, [
        'body' => $body,
        'headers' => [
            'Content-Type' => 'application/json',
            'X-OpenClaw-Timestamp' => $timestamp,
            'X-OpenClaw-Signature' => $signature,
        ],
        'timeout' => 5,
        'blocking' => false, // Don't wait for response
    ]);
}, 10, 3);
